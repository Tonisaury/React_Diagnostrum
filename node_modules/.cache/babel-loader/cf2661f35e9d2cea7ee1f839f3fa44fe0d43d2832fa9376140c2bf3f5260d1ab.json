{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tosag\\\\OneDrive\\\\Escritorio\\\\My projects\\\\Python scripts\\\\Diagnostrum\\\\React_Diagnostrum\\\\src\\\\AppointmentsContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppointmentsContext = /*#__PURE__*/createContext();\nexport function useAppointments() {\n  _s();\n  return useContext(AppointmentsContext);\n}\n_s(useAppointments, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AppointmentsProvider = ({\n  children\n}) => {\n  _s2();\n  const [appointments, setAppointments] = useState([]);\n\n  // Define backendURL using the environment variable\n  const backendURL = process.env.REACT_APP_BACKEND_URL;\n  const fetchAppointments = useCallback(async () => {\n    await axios.get(`${backendURL}/appointments/latest`).then(response => {\n      // Check if the response contains a message field, indicating no appointments\n      if (response.data.message) {\n        // Set appointments to an empty array or any structure you prefer to indicate no appointments\n        setAppointments([]);\n      } else {\n        // If there are appointments, reverse them to display new ones at the top\n        setAppointments(response.data.reverse());\n      }\n    });\n  }, [backendURL]);\n  const addAppointment = async appointmentData => {\n    // Similar approach as `fetchAppointments` if `response` isn't used elsewhere\n    await axios.post(`${backendURL}/appointments`, appointmentData).then(() => fetchAppointments()).catch(error => console.error(\"Error adding appointment:\", error));\n    // No need to assign to `response` if not using it\n  };\n  const deleteAppointment = async appointmentId => {\n    await axios.delete(`${backendURL}/appointments/${appointmentId}`).then(() => fetchAppointments()); // Re-fetch appointments to reflect the deletion\n  };\n  const updateSpreadsheet = useCallback(async () => {\n    await axios.post(`${backendURL}/update-spreadsheet`).then(response => {\n      alert(response.data.message); // Show success message\n    }).catch(error => {\n      console.error(\"Error updating spreadsheet:\", error);\n      alert(\"Failed to update the spreadsheet\"); // Show error message\n    });\n  }, [backendURL]);\n  return /*#__PURE__*/_jsxDEV(AppointmentsContext.Provider, {\n    value: {\n      appointments,\n      addAppointment,\n      deleteAppointment,\n      fetchAppointments,\n      updateSpreadsheet\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 3\n  }, this);\n};\n_s2(AppointmentsProvider, \"KZGhKsEBDjtSRS48i78JVRKv7aI=\");\n_c = AppointmentsProvider;\nvar _c;\n$RefreshReg$(_c, \"AppointmentsProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useCallback","axios","jsxDEV","_jsxDEV","AppointmentsContext","useAppointments","_s","AppointmentsProvider","children","_s2","appointments","setAppointments","backendURL","process","env","REACT_APP_BACKEND_URL","fetchAppointments","get","then","response","data","message","reverse","addAppointment","appointmentData","post","catch","error","console","deleteAppointment","appointmentId","delete","updateSpreadsheet","alert","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/tosag/OneDrive/Escritorio/My projects/Python scripts/Diagnostrum/React_Diagnostrum/src/AppointmentsContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useCallback } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst AppointmentsContext = createContext();\r\n\r\nexport function useAppointments() {\r\n  return useContext(AppointmentsContext);\r\n}\r\n\r\nexport const AppointmentsProvider = ({ children }) => {\r\n  const [appointments, setAppointments] = useState([]);\r\n\r\n  // Define backendURL using the environment variable\r\n  const backendURL = process.env.REACT_APP_BACKEND_URL;\r\n\r\n  const fetchAppointments = useCallback(async () => {\r\n    await axios.get(`${backendURL}/appointments/latest`)\r\n      .then(response => {\r\n        // Check if the response contains a message field, indicating no appointments\r\n        if(response.data.message) {\r\n          // Set appointments to an empty array or any structure you prefer to indicate no appointments\r\n          setAppointments([]);\r\n        } else {\r\n          // If there are appointments, reverse them to display new ones at the top\r\n          setAppointments(response.data.reverse());\r\n        }\r\n      });\r\n  }, [backendURL]);\r\n  \r\n\r\n  const addAppointment = async (appointmentData) => {\r\n    // Similar approach as `fetchAppointments` if `response` isn't used elsewhere\r\n    await axios.post(`${backendURL}/appointments`, appointmentData)\r\n    .then(() => fetchAppointments())\r\n    .catch(error => console.error(\"Error adding appointment:\", error));\r\n   // No need to assign to `response` if not using it\r\n  };\r\n\r\n  const deleteAppointment = async (appointmentId) => {\r\n    await axios.delete(`${backendURL}/appointments/${appointmentId}`)\r\n      .then(() => fetchAppointments()); // Re-fetch appointments to reflect the deletion\r\n  };\r\n\r\n  const updateSpreadsheet = useCallback(async () => {\r\n    await axios.post(`${backendURL}/update-spreadsheet`)\r\n      .then(response => {\r\n        alert(response.data.message); // Show success message\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Error updating spreadsheet:\", error);\r\n        alert(\"Failed to update the spreadsheet\"); // Show error message\r\n      });\r\n  }, [backendURL]);\r\n  \r\n\r\n  return (\r\n  <AppointmentsContext.Provider value={{ appointments, addAppointment, deleteAppointment, fetchAppointments, updateSpreadsheet }}>\r\n    {children}\r\n  </AppointmentsContext.Provider>\r\n  \r\n  );\r\n\r\n  \r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC/E,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,mBAAmB,gBAAGP,aAAa,CAAC,CAAC;AAE3C,OAAO,SAASQ,eAAeA,CAAA,EAAG;EAAAC,EAAA;EAChC,OAAOR,UAAU,CAACM,mBAAmB,CAAC;AACxC;AAACE,EAAA,CAFeD,eAAe;AAI/B,OAAO,MAAME,oBAAoB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EACpD,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;;EAEpD;EACA,MAAMa,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB;EAEpD,MAAMC,iBAAiB,GAAGhB,WAAW,CAAC,YAAY;IAChD,MAAMC,KAAK,CAACgB,GAAG,CAAE,GAAEL,UAAW,sBAAqB,CAAC,CACjDM,IAAI,CAACC,QAAQ,IAAI;MAChB;MACA,IAAGA,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;QACxB;QACAV,eAAe,CAAC,EAAE,CAAC;MACrB,CAAC,MAAM;QACL;QACAA,eAAe,CAACQ,QAAQ,CAACC,IAAI,CAACE,OAAO,CAAC,CAAC,CAAC;MAC1C;IACF,CAAC,CAAC;EACN,CAAC,EAAE,CAACV,UAAU,CAAC,CAAC;EAGhB,MAAMW,cAAc,GAAG,MAAOC,eAAe,IAAK;IAChD;IACA,MAAMvB,KAAK,CAACwB,IAAI,CAAE,GAAEb,UAAW,eAAc,EAAEY,eAAe,CAAC,CAC9DN,IAAI,CAAC,MAAMF,iBAAiB,CAAC,CAAC,CAAC,CAC/BU,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC,CAAC;IACnE;EACD,CAAC;EAED,MAAME,iBAAiB,GAAG,MAAOC,aAAa,IAAK;IACjD,MAAM7B,KAAK,CAAC8B,MAAM,CAAE,GAAEnB,UAAW,iBAAgBkB,aAAc,EAAC,CAAC,CAC9DZ,IAAI,CAAC,MAAMF,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;EACtC,CAAC;EAED,MAAMgB,iBAAiB,GAAGhC,WAAW,CAAC,YAAY;IAChD,MAAMC,KAAK,CAACwB,IAAI,CAAE,GAAEb,UAAW,qBAAoB,CAAC,CACjDM,IAAI,CAACC,QAAQ,IAAI;MAChBc,KAAK,CAACd,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC;IAChC,CAAC,CAAC,CACDK,KAAK,CAACC,KAAK,IAAI;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDM,KAAK,CAAC,kCAAkC,CAAC,CAAC,CAAC;IAC7C,CAAC,CAAC;EACN,CAAC,EAAE,CAACrB,UAAU,CAAC,CAAC;EAGhB,oBACAT,OAAA,CAACC,mBAAmB,CAAC8B,QAAQ;IAACC,KAAK,EAAE;MAAEzB,YAAY;MAAEa,cAAc;MAAEM,iBAAiB;MAAEb,iBAAiB;MAAEgB;IAAkB,CAAE;IAAAxB,QAAA,EAC5HA;EAAQ;IAAA4B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACmB,CAAC;AAKjC,CAAC;AAAC9B,GAAA,CAtDWF,oBAAoB;AAAAiC,EAAA,GAApBjC,oBAAoB;AAAA,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}